/*
 * @Author: DiChen
 * @Date: 2024-07-22 17:44:19
 * @LastEditors: DiChen
 * @LastEditTime: 2024-08-01 10:54:56
 */

// import mapboxgl from "../../dist/mapbox-gl-dev.js";

import tiandilayers from "../tdt/layers.js";

var map = null;
const subdomains = ["1", "2", "3", "4", "5", "6", "7"];
const caoqingse = {
  RGBA: [
    {
      //block
      //
      R: [245, 255],
      G: [244, 244],
      B: [238, 238],
      NEW: [247, 246, 240],
    },
    //草地   206, 234, 214
    { R: [206, 206], G: [234, 234], B: [214, 214], NEW: [208, 220, 174] },
    {
      //水
      // 171, 198, 239 172, 198, 239  179, 204, 241  170, 198, 238 170, 198, 238
      R: [169, 179],
      G: [198, 204],
      B: [237, 241],
      NEW: [144, 204, 203],
    },
    // 小路 252, 252, 251 253, 253, 253 255, 255, 255 229, 230, 229
    { R: [250, 255], G: [250, 255], B: [250, 255], NEW: [229, 233, 160] },
    {
      //快速
      //255, 244, 175  254, 240, 145  252, 238, 144 251, 242, 174 251, 240, 177 254, 240, 130
      R: [251, 255],
      G: [238, 244],
      B: [130, 177],
      NEW: [229, 233, 160],
    },
    {
      //高速
      //246, 225, 186
      //254, 205, 120  246, 197, 118  234, 178, 106  230, 183, 129 231, 176, 138 231, 187, 131 250, 220, 164
      R: [229, 255],
      G: [174, 225],
      B: [105, 180],
      NEW: [232, 202, 176],
    },
    {
      //高速2
      //187, 116, 71  184, 112, 67  189, 123, 73 181, 108, 66 200, 145, 107
      //206, 172, 125  223, 170, 126 216, 161, 109  212, 150, 94  209, 151, 101  209, 145, 89 193, 127, 84
      R: [179, 224],
      G: [104, 173],
      B: [64, 127],
      NEW: [232, 202, 176],
    },
    {
      //高速3
      // 183, 143, 239 180, 141, 235 186, 160, 241 195, 168, 230
      //
      R: [180, 195],
      G: [141, 170],
      B: [225, 242],
      NEW: [232, 202, 176],
    },
    {
      //高速4
      // 136, 102, 193 149, 119, 210   134, 99, 187  113, 77, 181  118, 84, 183 172, 148, 223
      // 173, 141, 230  180, 152, 231 203, 172, 240  207, 179, 240 225, 216, 233 206, 176, 235
      R: [120, 225],
      G: [85, 216],
      B: [180, 240],
      NEW: [232, 202, 176],
    },
  ],
  // Grey: {
  //   G: [170, 198],
  //   NEw: 111,
  // },
};
const blue = {
  RGBA: [
    //草地   206, 234, 214
    { R: [206, 206], G: [234, 234], B: [214, 214], NEW: [0, 42, 62] },
    //楼房 249, 250, 243
    { R: [249, 249], G: [250, 250], B: [243, 243], NEW: [0, 48, 65] },
    // 小路 252, 252, 251 253, 253, 253 255, 255, 255 229, 230, 229
    { R: [250, 255], G: [250, 255], B: [250, 255], NEW: [0, 94, 97] },
    {
      //快速
      //255, 244, 175  254, 240, 145  252, 238, 144 251, 242, 174 251, 240, 177 254, 240, 130
      R: [251, 255],
      G: [238, 244],
      B: [130, 177],
      NEW: [0, 94, 97],
    },
    {
      //快速2
      //
      R: [251, 255],
      G: [238, 244],
      B: [140, 177],
      NEW: [0, 94, 97],
    },
    {
      //高速
      //246, 225, 186
      //254, 205, 120  246, 197, 118  234, 178, 106  230, 183, 129 231, 176, 138 231, 187, 131 250, 220, 164
      R: [229, 255],
      G: [174, 225],
      B: [105, 180],
      NEW: [0, 94, 97],
    },
    {
      //高速2
      //187, 116, 71  184, 112, 67  189, 123, 73 181, 108, 66 200, 145, 107
      //206, 172, 125  223, 170, 126 216, 161, 109  212, 150, 94  209, 151, 101  209, 145, 89 193, 127, 84
      R: [179, 224],
      G: [104, 173],
      B: [64, 127],
      NEW: [0, 94, 97],
    },
    {
      //高速3
      // 183, 143, 239 180, 141, 235 186, 160, 241 195, 168, 230
      //
      R: [180, 195],
      G: [141, 170],
      B: [225, 242],
      NEW: [0, 94, 97],
    },
    // {
    //   //高速4
    //   // 136, 102, 193 149, 119, 210   134, 99, 187  113, 77, 181  118, 84, 183 172, 148, 223
    //   // 173, 141, 230  180, 152, 231 203, 172, 240  207, 179, 240 225, 216, 233 206, 176, 235
    //   R: [120, 225],
    //   G: [85, 216],
    //   B: [180, 240],
    //   NEW: [0, 94, 97],
    // },
    {
      //block
      //
      R: [245, 255],
      G: [244, 244],
      B: [238, 238],
      NEW: [3, 52, 71],
    },
    {
      //block
      // 232, 234, 236
      R: [232, 232],
      G: [234, 234],
      B: [236, 236],
      NEW: [18, 58, 81],
    },
    {
      //水
      // 171, 198, 239 172, 198, 239  179, 204, 241  170, 198, 238 170, 198, 238
      R: [169, 179],
      G: [198, 204],
      B: [237, 241],
      NEW: [19, 63, 88],
    },
  ],
  other: [3, 52, 71],
};
const test = {
  RGBA: [{ R: [170, 171], G: [198, 198], B: [238, 239], NEW: [2, 16, 5] }],
  add: [-246, -196, -163, 240],
};

const initMap = () => {
  map = new mapboxgl.Map({
    container: "mapDiv",
    center: [121.397428, 31.15923], // 设置地图中心点坐标（例如：北京）
    zoom: 9.5, // 设置初始缩放级别,
    style: {
      version: 8,
      sources: {},
      layers: [], //121.397428, 31.13923
    },
    colorChange: true,
    baseMapColor: test,
  });
  map.on("load", function () {
    tiandilayers.forEach((item) => {
      addRasterTileLayer(map, item.url, item.id, item.id);
    });
  });
};

const addRasterTileLayer = (map, url, sourceId, layerId) => {
  map.addSource(sourceId, {
    type: "raster",
    tiles: subdomains.map((subdomain) => url.replace("{s}", subdomain)),
  });
  map.addLayer({
    id: layerId,
    type: "raster",
    source: sourceId,
  });
};
export { initMap, addRasterTileLayer };
